!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vmap-svg"]=e():t["vmap-svg"]=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"draw",(function(){return a})),n.d(e,"drawPersp",(function(){return f})),n.d(e,"drawList",(function(){return c}));function i(t){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.innerHTML=t,e.setAttribute("x","-9999"),e.setAttribute("y","-9999");const n=document.querySelector("body").appendChild(e),i=e.getBBox();return n.remove(),{w:i.width,h:i.height}}const s={common:{}};s.basic={...s.common};const[r]=[s.basic],o={common:{font:{base:"'IBM Plex Mono', 'SFMono-Regular', 'Andale Mono', AndaleMono, 'Lucida Console', 'Lucida Sans Typewriter', Consolas, monospace"},textSize:{base:12,sm:10}}};o.basic={...r,...o.common},o.basic.applyStyles=function(){};e.default={draw:a,drawPersp:f,drawList:c};function a(t,e,n,s){const{vmapPad:r,strokeC:a,vmapC:f,figPad:c,figC:u,hideInputLabel:d,hideOrderLabel:m,customLabel:g,fullInputLabel:h,inputLabelMax:$,styleClass:x}={vmapPad:0,strokeC:"#fff",vmapC:"none",figPad:0,figC:"#fff",hideInputLabel:!1,hideOrderLabel:!1,fullInputLabel:!1,inputLabelMax:200,customLabel:void 0,styleClass:"basic",...s},y=o[x],[w,v]=[y.textSize,y.font.base],{vnum:b,margins:z}=t.data,M=t.scale,S=z[0],L=M[0]+S,C=M[1]+S,P=Math.sqrt(2*L**2),j=Math.sqrt(2*C**2),O={w:M[0]+r,h:M[1]+r};O.elem=`<svg class="vmap" width=${O.w} height=${O.h} viewBox="-${S/2+r/2} -${S/2+r/2} ${P+r} ${j+r}">\n\t\t<rect x="-${r/2}" y="-${r/2}" width="${P+r}" height="${j+r}" fill="${f}"></rect>\n\t\t<g transform="translate(0,${j/2}) rotate(-45,0,0)" stroke="${a}" stroke-width="${S}">${function t(e,n=""){if(null!==e&&"object"==typeof e)return e.children?(n+=`<g transform="translate(${e.position[0]}, ${e.position[1]})">`,e.children.forEach(e=>{n+=t(e)}),n+="</g>"):n+=`<rect x="${e.position[0]}" y="${e.position[1]}" width="${e.scale[0]}" height="${e.scale[1]}" fill="${p(e.value)}"></rect>`;throw new Error("Not a subtree!")}(t)}</g>\n\t</svg>`;const k={elem:((t,e)=>{if(void 0!==e)return e;let i="";if(!m&&b>0){i+=function(t,e='x="0" y="0"',n){const{maxLineWidth:i,font:s,textSize:r,leading:o}={maxLineWidth:60,font:"inherit",textSize:12,leading:4,...n},a=`font-family: ${s}; font-size: ${r}px; dominant-baseline: hanging;`;let l=t.reduce((t,e,n)=>t+(n>0?'<tspan y="0"> > </tspan>':"")+((t,e="html")=>{let n=[];if(n="svg"===e?['<tspan y="0">',"</tspan>"]:["",""],t.length>1){const i=t.split("_");let s=[];return s="svg"===e?['<tspan style="font-size: .8em;" dx="0" dy="6">',"</tspan>"]:["<sub>","</sub>"],i.length>1?""+(n[0]+i[0]+n[1]+s[0]+i[1]+s[1]):n[0]+t+n[1]}return n[0]+t+n[1]})(e,"svg"),"");return`<text ${e} style="${a}">${l}</text>`}(n,'y="0"',{font:v,textSize:w.base})}if(!d){const e=t.includes("::"),n=e?"":"ƒ = ",s=e?t.split("::")[0].length+256:$,r=e?`…(${4**b})`:'… <tspan style="font-style: italic">+more</tspan>';i+=l(t,'y="0"'+(i.length>0?` dy="${w.base+w.sm-2}px"`:""),{prefix:n,truncated:!h,truncMax:s,truncSuffix:r,font:v,textSize:w.sm})}return i})(e,g),pos:{x:0,y:O.h+10}};k.size=i(k.elem);const A=[Math.max(0,k.size.w-O.w),k.size.h>0?k.size.h+(k.pos.y-O.h):0],_={};return _.size={w:O.w+A[0]+c,h:O.h+A[1]+c},_.elem=`<svg class="vmap-figure" xmlns="http://www.w3.org/2000/svg" width="${_.size.w}" height="${_.size.h}" viewBox="-${c/2} -${c/2} ${_.size.w} ${_.size.h}">\n\t\t<rect x="-${c/2}" y="-${c/2}" width="${_.size.w}" height="${_.size.h}" fill="${u}"></rect>\n\t\t<g>${O.elem}</g>\n\t\t<g transform="translate(${k.pos.x},${k.pos.y})">${k.elem}</g>\n\t</svg>`,_}function l(t,e='x="0" y="0"',n){const{prefix:i,maxLineWidth:s,truncated:r,truncMax:o,truncSuffix:a,font:l,textSize:f,leading:c}={prefix:"",maxLineWidth:60,truncated:!1,truncMax:1e3,truncSuffix:"…",font:"inherit",textSize:12,leading:4,...n},u=`font-family: ${l}; font-size: ${f}px; dominant-baseline: hanging;`;let p=i+t,d="";return r&&p.length>o&&(p=p.substr(0,o),d+=a),p=((t,e=1)=>[...new Array(Math.ceil(t.length/e))].map((n,i)=>t.substr(e*i,e)))(p,s).reduce((t,e,n)=>t+(n>0?((t,e)=>`<tspan x="0" dy="${e}">${t}</tspan>`)(e,f+c+"px"):e),""),`<text ${e} style="${u}">${p+d}</text>`}function f(t,e,n){const{figPad:s,figC:r,margin:a,customLabel:f,styleClass:c}={figPad:0,figC:"#fff",margin:20,customLabel:void 0,styleClass:"basic",...n},u=o[c],[p,d]=[u.textSize,u.font.base],m={vmaps:t,input:e,options:n},g={x:Math.floor(a/4),y:Math.floor(a/2)},h=t.length,$=t[0].size,x=Math.min(h,6),y=Math.floor(h/x),w=$.w*x+2*g.x*(x-1),v=$.h*y+2*g.y*(y-1),b=t.map(t=>({elem:t.elem})).reduce((t,e,n)=>{const i=n%x,s=Math.floor(n/x),r=[$.w*i+2*g.x*i,$.h*s+2*g.y*s];return t+`<g class="vmap-item" transform="translate(${r[0]},${r[1]})">${e.elem}</g>`},""),z={elem:((t,e)=>{if(void 0!==e)return e;const n=t.includes("::");return l(t,'y="0"',{prefix:n?"":"ƒ = ",truncated:!1,font:d,textSize:p.base})})(e,f),pos:{x:0,y:v+g.y},lineSpacing:g.y};z.size=i(z.elem);const M=[Math.max(0,z.size.w-w),z.size.h+(z.pos.y-v)+z.lineSpacing];return m.size={w:w+M[0]+s,h:v+M[1]+s},m.elem=`<svg class="vmap-perspectives-figure" xmlns="http://www.w3.org/2000/svg" width="${m.size.w}" height="${m.size.h}" viewBox="-${s/2} -${s/2} ${m.size.w} ${m.size.h}">\n\t\t<rect x="-${s/2}" y="-${s/2}" width="${m.size.w}" height="${m.size.h}" fill="${r}"></rect>\n\t\t<g class="vmap-perspectives vmap-table">${b}</g>\n\t\t<g transform="translate(${z.pos.x},${z.pos.y})">\n\t\t\t<line x1="0" y1="0" x2="${w}" y2="0" stroke="black" stroke-width="0.5" />\n\t\t\t<g transform="translate(0,${z.lineSpacing})">${z.elem}</g>\n\t\t</g>\n\t</svg>`,m}function c(t,e){const{margin:n,vAlign:i}={margin:20,vAlign:"bottom",...e};return`<div class="vmap-list" style="display: flex; flex-wrap: wrap; ${u(i)} margin: 0 -${Math.floor(n/2)}px">\n\t\t\t${t.reduce((t,e)=>`${t}<div class="vmap-item" style="padding: ${Math.floor(n/4)}px ${Math.floor(n/2)}px">${e.elem}</div>`,"")}\n\t\t\t</div>`}const u=t=>`align-items: ${"top"===t?"flex-start":"center"===t?"center":"flex-end"};`,p=t=>0==t?"#000000":1==t?"#4757ff":2==t?"#ff0044":3==t?"#00ff5f":NaN}]).default}));
//# sourceMappingURL=vmap-svg.min.js.map